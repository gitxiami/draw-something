webpackJsonp([1],{763:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u,r=a(92),o=n(r),s=a(89),i=n(s),c=a(90),f=n(c),d=a(93),m=n(d),p=a(94),v=n(p),h=a(248),E=n(h),N=a(9),k=n(N),b=a(23),w=a(91),y=a(145),_=a(249),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(_),S=a(768),C=n(S),M=a(765),I=n(M),R=a(767),x=n(R),O=a(766),P=(l=(0,w.connect)(function(e){return{roomList:e.room.roomList}},function(e){return(0,b.bindActionCreators)((0,E.default)({},g),e)}))(u=function(e){function t(){var e,a,n,l;(0,i.default)(this,t);for(var u=arguments.length,r=Array(u),s=0;s<u;s++)r[s]=arguments[s];return a=n=(0,m.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(r))),n.state={roomInputValue:""},l=a,(0,m.default)(n,l)}return(0,v.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this,t=this.props.roomList;return k.default.createElement("section",null,k.default.createElement(x.default,{title:"首页",type:"home"}),k.default.createElement("section",{className:"home-container"},k.default.createElement("section",{className:"input-wrapper"},k.default.createElement("input",{className:"input input-default input-lg",placeholder:"输入房间名",value:this.state.roomInputValue,onChange:function(t){var a=t.target.value;e.setState({roomInputValue:a})},onKeyDown:function(t){13===t.keyCode&&e.enterRoom()}}),k.default.createElement("span",{className:"btn btn-default btn-lg"+(this.state.roomInputValue?"":" disabled"),onClick:this.enterRoom.bind(this)},"进入房间")),k.default.createElement("section",{className:"room-list-wrapper"},t.length?null:k.default.createElement("div",{className:"tip"},"暂无其他房间，自己创建一个吧~"),t.map(function(e){var t=e.roomName,a=e.peopleCount,n=e.owner;return k.default.createElement(y.Link,{to:"/"+t,className:"room-item",key:t},k.default.createElement("div",{className:"row"},k.default.createElement("span",{className:"icon-wrapper"},k.default.createElement("svg",{className:"icon","aria-hidden":"true"},k.default.createElement("use",{xlinkHref:"#icon-home"}))),k.default.createElement("span",{className:"value"},t)),k.default.createElement("div",{className:"row"},k.default.createElement("span",{className:"icon-wrapper"},k.default.createElement("svg",{className:"icon","aria-hidden":"true"},k.default.createElement("use",{xlinkHref:"#icon-group"}))),k.default.createElement("span",{className:"value"},a)),k.default.createElement("div",{className:"row"},k.default.createElement("span",{className:"icon-wrapper"},k.default.createElement("svg",{className:"icon","aria-hidden":"true"},k.default.createElement("use",{xlinkHref:"#icon-favor"}))),k.default.createElement("span",{className:"value"},(0,O.getPersonName)(n))))}))))}},{key:"enterRoom",value:function(e){this.state.roomInputValue&&C.default.push("/"+this.state.roomInputValue)}},{key:"componentDidMount",value:function(){var e=this.props.setRoomInfo;I.default.leaveRoom(),e({roomName:""})}}]),t}(N.Component))||u;t.default=P},765:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=a(252),r=l(u),o=a(147),s=l(o),i=a(148),c=l(i),f=a(249),d=n(f),m=a(144),p=(n(m),a(146)),v=n(p),h=a(250),E=(n(h),a(251));t.default={enterRoom:function(e){r.default.emit("enterRoom",e,function(){c.default.dispatch(d.setRoomInfo({roomName:e}))})},leaveRoom:function(){r.default.emit("leaveRoom"),c.default.dispatch(d.setRoomInfo({roomName:""}))},sendRoomMessage:function(e){var t=c.default.getState().user;r.default.emit("sendRoomMessage",e,function(a){a.ok&&E.message$.next({content:e,by:t,timestamp:a.timestamp,type:"message"})})},startGame:function(){r.default.emit("startGame")},emitCanvasStroke:function(e){r.default.emit("canvasStroke",e)},setUserInfo:function(e){r.default.emit("setClientInfo",e,function(t){s.default.set("clientInfo",e,6048e5),c.default.dispatch(v.setUserData({info:e}))})}}},766:function(e,t,a){"use strict";function n(e){return e?e.info.name||e.id:""}Object.defineProperty(t,"__esModule",{value:!0}),t.getPersonName=n;var l={};t.default=l},767:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u,r,o,s=a(92),i=n(s),c=a(89),f=n(c),d=a(90),m=n(d),p=a(93),v=n(p),h=a(94),E=n(h),N=a(248),k=n(N),b=a(9),w=n(b),y=a(23),_=a(91),g=a(145),S=a(144),C=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(S),M=a(765),I=n(M),R=(l=(0,_.connect)(function(e){return{loadingStatus:e.network.loadingStatus,webSocketStatus:e.network.webSocketStatus,user:e.user}},function(e){return(0,y.bindActionCreators)((0,k.default)({},C),e)}))((o=r=function(e){function t(){var e,a,n,l;(0,f.default)(this,t);for(var u=arguments.length,r=Array(u),o=0;o<u;o++)r[o]=arguments[o];return a=n=(0,v.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(r))),n.state={nameEditable:!1,nameValue:""},l=a,(0,v.default)(n,l)}return(0,E.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=(t.loadingStatus,t.webSocketStatus),n=(t.loading,t.loaded,t.wsConnect,t.wsDisconnect,t.user),l=t.title,u=t.type;return w.default.createElement("section",{className:"fixed-header"},w.default.createElement("div",{className:"item left"},a?null:w.default.createElement("span",{className:"item wifi alert-color",title:"网络出错"},w.default.createElement("svg",{className:"icon","aria-hidden":"true"},w.default.createElement("use",{xlinkHref:"#icon-wifi"}))),w.default.createElement("span",null,function(e){switch(e){case"home":return null;case"room":return w.default.createElement(g.Link,{to:"/"},w.default.createElement("span",{className:"icon-wrapper"},w.default.createElement("svg",{className:"icon clickable","aria-hidden":"true"},w.default.createElement("use",{xlinkHref:"#icon-back"}))));default:return null}}(u)),w.default.createElement("span",null,"room"===u?"房间["+l+"]":l)),w.default.createElement("div",{className:"item right",onClick:this.switchInfoEditable.bind(this)},this.state.nameEditable?[w.default.createElement("span",{className:"icon-wrapper"},w.default.createElement("svg",{className:"icon","aria-hidden":"true"},w.default.createElement("use",{xlinkHref:"#icon-people"}))),w.default.createElement("input",{className:"input input-white input-md",value:this.state.nameValue,onChange:function(t){e.setState({nameValue:t.target.value})},onKeyDown:function(t){13===t.keyCode&&e.setName()}}),w.default.createElement("span",{className:"icon-wrapper",onClick:this.setName.bind(this)},w.default.createElement("svg",{className:"icon clickable","aria-hidden":"true"},w.default.createElement("use",{xlinkHref:"#icon-roundcheck"}))),w.default.createElement("span",{className:"icon-wrapper",onClick:function(){e.setState({nameEditable:!1})}},w.default.createElement("svg",{className:"icon clickable","aria-hidden":"true"},w.default.createElement("use",{xlinkHref:"#icon-roundclose"})))]:w.default.createElement("div",{title:"点击修改昵称",className:"clickable"},w.default.createElement("span",{className:"icon-wrapper"},w.default.createElement("svg",{className:"icon","aria-hidden":"true"},w.default.createElement("use",{xlinkHref:"#icon-profile"}))),w.default.createElement("span",null,n.info.name||n.id))))}},{key:"componentWillMount",value:function(){}},{key:"switchInfoEditable",value:function(){this.state.nameEditable||this.setState({nameEditable:!0,nameValue:this.props.user.info.name||this.props.user.id})}},{key:"setName",value:function(){I.default.setUserInfo({name:this.state.nameValue}),this.setState({nameEditable:!1})}}]),t}(b.Component),r.defaultProps={type:""},u=o))||u;t.default=R},768:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(253),l=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=(0,l.default)()}});
//# sourceMappingURL=chunk.1.5acfae28c058df9dbbf9.js.map