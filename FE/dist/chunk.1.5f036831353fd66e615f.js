webpackJsonp([1],{768:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u,o=a(94),r=n(o),s=a(91),i=n(s),c=a(92),f=n(c),d=a(95),m=n(d),p=a(96),h=n(p),v=a(249),E=n(v),k=a(9),N=n(k),y=a(23),b=a(93),w=a(145),_=a(250),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(_),S=a(774),C=n(S),I=a(769),M=n(I),R=a(770),V=n(R),O=a(253),P=(l=(0,b.connect)(function(e){return{roomList:e.room.roomList}},function(e){return(0,y.bindActionCreators)((0,E.default)({},g),e)}))(u=function(e){function t(){var e,a,n,l;(0,i.default)(this,t);for(var u=arguments.length,o=Array(u),s=0;s<u;s++)o[s]=arguments[s];return a=n=(0,m.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(o))),n.state={roomInputValue:""},l=a,(0,m.default)(n,l)}return(0,h.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this,t=this.props.roomList;return N.default.createElement("section",null,N.default.createElement(V.default,{title:"首页",type:"home"}),N.default.createElement("section",{className:"home-container"},N.default.createElement("section",{className:"input-wrapper input-group input-btn"},N.default.createElement("input",{className:"input input-default input-lg",placeholder:"输入房间名",value:this.state.roomInputValue,onChange:function(t){var a=t.target.value;e.setState({roomInputValue:a})},onKeyDown:function(t){13===t.keyCode&&e.enterRoom()}}),N.default.createElement("span",{className:"btn btn-default btn-lg"+(this.state.roomInputValue?"":" disabled"),onClick:this.enterRoom.bind(this)},"进入房间")),N.default.createElement("section",{className:"room-list-wrapper"},t.length?null:N.default.createElement("div",{className:"tip"},"暂无其他房间，自己创建一个吧~"),t.map(function(e){var t=e.roomName,a=e.peopleCount,n=e.owner;return N.default.createElement(w.Link,{to:"/"+t,className:"room-item",key:t},N.default.createElement("div",{className:"row"},N.default.createElement("span",{className:"key"},"房间"),N.default.createElement("span",{className:"value"},t)),N.default.createElement("div",{className:"row"},N.default.createElement("span",{className:"key"},"人数"),N.default.createElement("span",{className:"value"},a)),N.default.createElement("div",{className:"row"},N.default.createElement("span",{className:"key"},"房主"),N.default.createElement("span",{className:"value"},(0,O.getPersonName)(n))))}))))}},{key:"enterRoom",value:function(e){this.state.roomInputValue&&C.default.push("/"+this.state.roomInputValue)}},{key:"componentDidMount",value:function(){var e=this.props.setRoomInfo;document.title="你画我猜online",M.default.leaveRoom(),e({roomName:""})}}]),t}(k.Component))||u;t.default=P},769:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=a(254),o=l(u),r=a(147),s=l(r),i=a(148),c=l(i),f=a(250),d=n(f),m=a(144),p=(n(m),a(146)),h=n(p),v=a(251),E=(n(v),a(252));t.default={enterRoom:function(e){o.default.emit("enterRoom",e,function(){c.default.dispatch(d.setRoomInfo({roomName:e}))})},leaveRoom:function(){o.default.emit("leaveRoom"),c.default.dispatch(d.setRoomInfo({roomName:""}))},sendRoomMessage:function(e){var t=c.default.getState().user;o.default.emit("sendRoomMessage",e,function(a){a.ok&&E.message$.next({content:e,by:t,timestamp:a.timestamp,type:"message"})})},startGame:function(){o.default.emit("startGame")},emitCanvasStroke:function(e){o.default.emit("canvasStroke",e)},setUserInfo:function(e){o.default.emit("setClientInfo",e,function(t){s.default.set("clientInfo",e,6048e5),c.default.dispatch(h.setUserData({info:e}))})}}},770:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u,o,r,s=a(94),i=n(s),c=a(91),f=n(c),d=a(92),m=n(d),p=a(95),h=n(p),v=a(96),E=n(v),k=a(249),N=n(k),y=a(9),b=n(y),w=a(23),_=a(93),g=a(145),S=a(144),C=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(S),I=a(769),M=n(I),R=(l=(0,_.connect)(function(e){return{loadingStatus:e.network.loadingStatus,webSocketStatus:e.network.webSocketStatus,user:e.user}},function(e){return(0,w.bindActionCreators)((0,N.default)({},C),e)}))((r=o=function(e){function t(){var e,a,n,l;(0,f.default)(this,t);for(var u=arguments.length,o=Array(u),r=0;r<u;r++)o[r]=arguments[r];return a=n=(0,h.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(o))),n.state={nameEditable:!1,nameValue:""},l=a,(0,h.default)(n,l)}return(0,E.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=(t.loadingStatus,t.webSocketStatus),n=(t.loading,t.loaded,t.wsConnect,t.wsDisconnect,t.user),l=t.title,u=t.type;return b.default.createElement("section",{className:"fixed-header"},b.default.createElement("div",{className:"item left"},a?null:b.default.createElement("span",{className:"item wifi alert-color",title:"网络出错"},b.default.createElement("svg",{className:"icon","aria-hidden":"true"},b.default.createElement("use",{xlinkHref:"#icon-wifi"}))),b.default.createElement("span",null,function(e){switch(e){case"home":return null;case"room":return b.default.createElement(g.Link,{to:"/"},b.default.createElement("span",{className:"icon-wrapper"},b.default.createElement("svg",{className:"icon clickable","aria-hidden":"true"},b.default.createElement("use",{xlinkHref:"#icon-back"}))));default:return null}}(u)),b.default.createElement("span",null,"room"===u?b.default.createElement("span",null,"房间：",b.default.createElement("span",{className:"room-name"},l)):b.default.createElement("span",null,l))),b.default.createElement("div",{className:"item right",onClick:this.switchInfoEditable.bind(this)},this.state.nameEditable?[b.default.createElement("span",{key:"icon",className:"icon-wrapper"},b.default.createElement("svg",{className:"icon","aria-hidden":"true"},b.default.createElement("use",{xlinkHref:"#icon-people"}))),b.default.createElement("input",{key:"input",className:"input input-white input-md",value:this.state.nameValue,onChange:function(t){e.setState({nameValue:t.target.value})},onKeyDown:function(t){13===t.keyCode&&e.setName()}}),b.default.createElement("span",{key:"confirm",className:"icon-wrapper",onClick:this.setName.bind(this)},b.default.createElement("svg",{className:"icon clickable","aria-hidden":"true"},b.default.createElement("use",{xlinkHref:"#icon-roundcheck"}))),b.default.createElement("span",{key:"cancel",className:"icon-wrapper",onClick:function(){e.setState({nameEditable:!1})}},b.default.createElement("svg",{className:"icon clickable","aria-hidden":"true"},b.default.createElement("use",{xlinkHref:"#icon-roundclose"})))]:b.default.createElement("div",{title:"点击修改昵称",className:"clickable"},b.default.createElement("span",{className:"icon-wrapper"},b.default.createElement("svg",{style:{stroke:"#fff",fill:"#fff"},className:"icon","aria-hidden":"true"},b.default.createElement("use",{xlinkHref:"#icon-people"}))),b.default.createElement("span",null,n.info.name||n.id))))}},{key:"componentWillMount",value:function(){}},{key:"switchInfoEditable",value:function(){this.state.nameEditable||this.setState({nameEditable:!0,nameValue:this.props.user.info.name||this.props.user.id})}},{key:"setName",value:function(){this.props.user.info.name!==this.state.nameValue&&M.default.setUserInfo({name:this.state.nameValue}),this.setState({nameEditable:!1})}}]),t}(y.Component),o.defaultProps={type:""},u=r))||u;t.default=R},774:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(255),l=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=(0,l.default)()}});
//# sourceMappingURL=chunk.1.5f036831353fd66e615f.js.map